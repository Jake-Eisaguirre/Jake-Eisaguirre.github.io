[
  {
    "path": "posts/2021-08-27-puerto-rico-stream-chemistry/",
    "title": "Hurricane Impacts on Stream Chemical Composition in the Luquillo Mountains, Puerto Rico",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Felicia Cruz",
        "url": {}
      },
      {
        "name": "Jake Eisaguirre",
        "url": {}
      },
      {
        "name": "Paloma Cartwright",
        "url": {}
      },
      {
        "name": "Juliet Cohen",
        "url": {}
      }
    ],
    "date": "2021-08-27",
    "categories": [],
    "contents": "\nRead & Clean Data\nRead in the four datasets containing the chemistry of stream water from the Luquillo Mountains using read_csv(). Tidied data using clean_names() and changed the dates to ISO 8601 format using lubridate.\n\n\nQ1 <- read_csv(here(\"/courses\", \"EDS214\", \"eco-warriors\", \"data\", \"QuebradaCuenca1-Bisley.csv\" ), \n               na = \"-9999\") %>% \n  clean_names() %>% \n  mutate(sample_date = mdy(sample_date))\n\n\nQ2 <- read_csv(here(\"/courses\", \"EDS214\", \"eco-warriors\", \"data\", \"QuebradaCuenca2-Bisley.csv\"), \n               na = \"-9999\") %>% \n  clean_names() %>% \n  mutate(sample_date = mdy_hm(sample_date))\n\n\nQ3 <- read_csv(here(\"/courses\", \"EDS214\", \"eco-warriors\", \"data\", \"QuebradaCuenca3-Bisley.csv\"), \n               na = \"-9999\") %>% \n  clean_names() %>% \n  mutate(sample_date = mdy(sample_date))\n\n\n\nRPM <- read_csv(here(\"/courses\", \"EDS214\", \"eco-warriors\", \"data\", \"RioMameyesPuenteRoto.csv\"), \n                na = \"-9999\") %>% \n  clean_names() %>% \n  mutate(sample_date = mdy(sample_date))\n\n\n\nData Wrangling\nSelecting Variables of Interest\nSelected the relevant variables to be used in our graph in order to simplify the dataset.\n\n\nQ1.1 <- Q1 %>% \n  select(sample_id, sample_date, k, no3)\n\n\nQ2.1 <- Q2 %>% \n  select(sample_id, sample_date, k, no3)\n\n\nQ3.1 <- Q3 %>% \n  select(sample_id, sample_date, k, no3)\n\n\nRPM.1 <- RPM %>% \n  select(sample_id, sample_date, k, no3)\n\n\n\nIsolating the Year using lubridate\n\n\nQ1.1 <- Q1.1 %>%\n  mutate(sample_year = lubridate::year(sample_date)) \n\n\nQ2.1 <- Q2.1 %>%\n  mutate(sample_year = lubridate::year(sample_date))\n\n\nQ3.1 <- Q3.1 %>%\n  mutate(sample_year = lubridate::year(sample_date))\n  \n  \nRPM.1 <- RPM.1 %>%\n  mutate(sample_year = lubridate::year(sample_date)) \n\n\n\nBinding the datasets\nUsed rbind() to bind the datasets. We used rbind() because it stacked the datasets without adding extra columns. full_join() was considered, as it would have performed the same function\n\n\ncombined_sites <- rbind(Q1.1, Q2.1, Q3.1, RPM.1)\n\n\n\nSummarize Data\nGrouping Data\nGrouped and summarized the data by year, taking the mean Potassium and Nitrate measurements, using group_by() % summarize()\n\n\ncombined_sites_summarize <- combined_sites %>% \n  group_by(sample_id, sample_year) %>% \n  summarize(mean_k = mean(k, na.rm = TRUE),\n            mean_no3 = mean(no3, na.rm = TRUE))\n\n\n\nEditing Data\nChanged the names of the elements in the data frame and reordered them so that the levels match the figure.\n\n\ncombined_sites_summarize$sample_id <- str_replace(combined_sites_summarize$sample_id, \n                                                  \"MPR\",\n                                                  \"Puente Roto Mameyes\")\ncombined_sites_summarize$sample_id <- str_replace(combined_sites_summarize$sample_id, \n                                                  \"Q1\",\n                                                  \"Quebrada uno-Bisley\")\ncombined_sites_summarize$sample_id <- str_replace(combined_sites_summarize$sample_id, \n                                                  \"Q2\",\n                                                  \"Quebrada dos-Bisley\")\ncombined_sites_summarize$sample_id <- str_replace(combined_sites_summarize$sample_id, \n                                                  \"Q3\",\n                                                  \"Quebrada tres-Bisley\")\ncombined_sites_summarize$sample_id <- factor(combined_sites_summarize$sample_id, \n                                              levels = c(\"Quebrada dos-Bisley\",\n                                                        \"Quebrada uno-Bisley\",\n                                                        \"Quebrada tres-Bisley\", \n                                                        \"Puente Roto Mameyes\"))\n\n\n\nData Visualization\nCreated two line graphs using ggplot() for annual site means of Potassium and Nitrate. The data was sorted by site_id, displaying the varying levels for each site in the Luquillo Mountains. We then performed data visualization to customize our graph and make it reader friendly. Used patchwork library to combine the graphs.\n\n\n# Potassium graph \nk_graph <- ggplot(data = combined_sites_summarize, aes(x = sample_year, y = mean_k)) +\n  geom_line(aes(color = sample_id, linetype = sample_id)) +\n  geom_vline(xintercept = (1989), \n             linetype = \"dashed\") +\n  labs(x = \"Year\",\n       y = \"K (mg/l)\",\n       title = \"Stream Water Potassium and Nitrate Levels\",\n       subtitle = \"Luquillo Mountains, Puerto Rico 1986-2012\",\n       color = \"Site\",\n       linetype = \"Site\") +\n  theme_classic() + \n  scale_x_continuous(position = \"top\") +\n  scale_color_viridis_d(option = \"H\") +\n  theme(plot.margin = unit(c(0, 0, 0.0001, 0), \"inches\"),\n        panel.grid.major.x = element_line(),\n        legend.position = \"none\") \n\n\n# Nitrate graph\nno3_graph <- ggplot(data = combined_sites_summarize, aes(x = sample_year, y = mean_no3)) +\n  geom_line(aes(color = sample_id, linetype = sample_id)) +\n  geom_vline(xintercept = (1989), \n             linetype = \"dashed\") + \n  labs(x = element_blank(),\n       y = \"Nitrate (ug/l)\",\n       title = element_blank(),\n       color = \"Site\",\n       linetype = \"Site\") +\n  theme_classic() +\n  scale_color_viridis_d(option = \"H\") +\n  theme(legend.position = \"none\",\n        axis.title.x.bottom = element_blank(),\n        axis.line.x.top = element_line(),\n        axis.ticks.x.top = element_line(),\n        plot.margin = unit(c(0.0001, 0, 0, 0), \"inches\"),\n        panel.grid.major.x = element_line()) +\n  scale_y_continuous(limits = c(0,400)) \n  \n\n\n# Make combined graph with a single centered legend\ncombined <- k_graph / no3_graph & theme(legend.position = \"right\")\ncombined + plot_layout(guides = \"collect\")\n\n\n\n\nAnalysis\nStream water samples were collected weekly from eight sites within the Luquillo Mountains in Puerto Rico from 1986 - 2012. This data reveals how stream chemistry responds to a major hurricane event. The waterâ€™s chemical composition from four selected sites graphed over time reveals dramatic fluctuations in potassium and nitrate levels after Hurricane Hugo in 1989.\nPotassium (measured in mg/l) at all sites increased steadily from 1986 to 1989, and spiked dramatically for two years following Hurricane Hugo in 1989. This is likely due to increased quantities of plant debris in the stream systems as a result of the hurricane. The sampling site at Quebrada dos-Bisley saw the most extreme increase in potassium levels, peaking in 1993. The sampling site at Puente Roto Mameyes maintained the the most stable potassium levels during this influx period. In the years following 1993, we see a gradual decline at all sites over time with minor fluctuations from 2000 - 2005.\nNitrate levels (measured in ug/l) at all sites remained relatively stable from 1986 to 1990, but increased dramatically following Hurricane Hugo in 1989. This is likely due to the increased plant debris that caused a similar increase in potassium levels. Data was unavailable in the years immediately following 1993, but beginning in 1996 we see the nitrate levels are steading decreasing through 2010.\nCitation\nLink to Github Repository: https://github.com/julietcohen/EDS-214-eco-warriors\nMcDowell, W. 2021. Chemistry of stream water from the Luquillo Mountains ver 4923052. Environmental Data Initiative. https://doi.org/10.6073/pasta/ddb4d61aea2fb18b77540e9b0c424684 (Accessed 2021-08-25)\n\n\n\n",
    "preview": "posts/2021-08-27-puerto-rico-stream-chemistry/puerto-rico-stream-chemistry_files/figure-html5/unnamed-chunk-7-1.png",
    "last_modified": "2021-08-27T20:15:05+00:00",
    "input_file": "puerto-rico-stream-chemistry.knit.md"
  },
  {
    "path": "posts/2021-08-22-figure/",
    "title": "Sexy Figures",
    "description": "A handful of figures trying out different functions within ggplot.",
    "author": [
      {
        "name": "Jake Eisaguirre",
        "url": {}
      }
    ],
    "date": "2021-08-22",
    "categories": [],
    "contents": "\n\n\nhide\n\nliz <-  read_csv(here::here(\"lizards.csv\"))\n\n\n\n\n\nhide\n\n\nww_liz <- liz %>% \n  filter(common_name == \"western whiptail\", site == \"sand\")\n\nggplot(ww_liz, aes(x = total_length, y = weight)) +\n  geom_point() +\n  theme_classic() +\n  geom_text_repel(aes(label = toe_num), size = 3, max.overlaps = 20)\n\n\n\n\n\n\nhide\n\ndata <- gapminder %>% \n  filter(continent == \"Europe\", year == 1952)\n\nggplot(data, aes(x = gdpPercap, y = lifeExp)) +\n  geom_point() +\n  geom_text_repel(aes(label = country), size =  3) +\n  theme_classic()\n\n\n\n\n\n\nhide\n\np <- ggplot(liz, aes(x = total_length, y = weight)) +\n  geom_point()\n\np + gghighlight(toe_num == 250, label_key = toe_num) + \n  theme_classic()\n\n\n\n\n\n\nhide\n\nq <- ggplot(liz, aes(x = total_length, y = weight)) +\n  geom_line(aes(color = common_name)) +\n  gghighlight(max(weight) > 30) +\n  theme_classic()\n\nq\n\n\n\n\n\n\nhide\n\n(p | q) / q & theme_classic()\n\n\n\n\n\n\nhide\n\nwhiptails <- liz %>% \n  filter(common_name == \"western whiptail\") %>% \n  drop_na(total_length, weight)\n\nggplot(data = whiptails, aes(x = total_length, y = weight)) +\n  geom_point() + \n  theme_classic() +\n  geom_rug()\n\n\n\n\n\n\nhide\n\nj <- ggplot(data = whiptails, aes(x = total_length, y = weight)) +\n  geom_point(aes(color = sex), size = 2) + \n  scale_color_manual(values = c(\"cyan4\", \"black\", \"goldenrod\"),\n                     name = \"Sex:\",\n                     labels = c(\"female\", \"juvenile\", \"male\")) +\n   theme_classic() +\n  theme(legend.position = \"bottom\")\n\nggMarginal(j, type = \"boxplot\", groupColour = T)\n\n\n\n\n\n\nhide\n\nggplot(whiptails, aes(x = sex, y = weight)) +\n  geom_beeswarm() +\n  geom_violin(fill = NA) +\n  geom_boxplot(fill = NA) +\n  theme_classic()\n\n\n\n\n\n\nhide\n\nlizard_counts <- liz %>% \n  mutate(date = mdy(date)) %>% \n  mutate(year = year(date)) %>% \n  count(year, common_name) %>% \n  rename(count = n)\n\n\n\n\n\nhide\n\nggplot(data = lizard_counts, aes(x = year, y = common_name)) +\n  theme_classic() +\n  geom_tile(aes(fill = count)) +\n  geom_text(aes(label = count), color = \"white\", size = 3) +\n  scale_fill_gradientn(colors = c(\"navy\", \"red\", \"orange\")) + \n  scale_fill_viridis_c()\n\n\n\n\n\n\nhide\n\njornada_veg <- read_sf(here(\"spatial_vegetation\", \"doc.kml\")) %>% \n  select(Name) %>% \n  clean_names()\n\nggplot(data = jornada_veg) +\n  geom_sf(aes(fill = name), color = NA) +\n  scale_fill_viridis_d() +\n  theme_minimal() +\n  labs(x =  \"Longitude\",\n       y = \"Latitude\",\n       fill = \"Dominant vegetation:\")\n\n\n\n\n\n\n\n",
    "preview": "posts/2021-08-22-figure/figure_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-08-24T23:04:03+00:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-08-20-bringing-it-all-together/",
    "title": "Bringing it All Together",
    "description": "Some examples of using all my tools from EDS 221 to wrangle and create data visualizations.",
    "author": [
      {
        "name": "Jake Eisaguirre",
        "url": {}
      }
    ],
    "date": "2021-08-20",
    "categories": [],
    "contents": "\n\n\nfids <- read_csv(here(\"_posts\",\"2021-08-20-bringing-it-all-together\", \"HTL-MAR-FiddlerCrabBodySize_copy.csv\"))\n\n\n\nData Exploration\n\n\nggplot(fids, aes(x = Latitude, y = carapace_width)) + \n  geom_point(aes(color = Latitude)) +\n  labs(title = \"Carapace Width by Latitude\",\n       x = \"Latitude\", \n       y = \"Carapace Width (mm)\", \n       caption = \"Figure A is the observed Caprapace widths at latitude degrees\") +\n  theme_classic()\n\n\n\n\nHere we have a nice figure in which we can do some initial data exploration regarding carapace width by latitude.\nData Table\n\n\ndata <- fids %>%\n  clean_names() %>% \n  group_by(site) %>% \n  summarize(mean_carapace_width = round(mean(carapace_width), 2), sd_carapace_width = round(sd(carapace_width), 2), sample_size = n())\n\nkable(data, col.name = c(\"Site\", \"Mean Carapace Width (mm)\", \"SD Carapace Width (mm)\", \"Sample Size\")) %>% \n  kable_classic()\n\n\n\nSite\n\n\nMean Carapace Width (mm)\n\n\nSD Carapace Width (mm)\n\n\nSample Size\n\n\nBC\n\n\n16.20\n\n\n4.81\n\n\n37\n\n\nCC\n\n\n16.82\n\n\n2.05\n\n\n27\n\n\nCT\n\n\n14.69\n\n\n2.36\n\n\n33\n\n\nDB\n\n\n15.60\n\n\n2.12\n\n\n30\n\n\nGTM\n\n\n12.40\n\n\n1.80\n\n\n28\n\n\nJC\n\n\n15.27\n\n\n2.72\n\n\n30\n\n\nNB\n\n\n17.14\n\n\n2.29\n\n\n29\n\n\nNIB\n\n\n13.29\n\n\n2.42\n\n\n30\n\n\nPIE\n\n\n18.50\n\n\n2.30\n\n\n28\n\n\nRC\n\n\n12.49\n\n\n2.34\n\n\n25\n\n\nSI\n\n\n9.85\n\n\n1.79\n\n\n30\n\n\nVCR\n\n\n16.34\n\n\n2.94\n\n\n30\n\n\nZI\n\n\n12.06\n\n\n2.01\n\n\n35\n\n\nHere is a data table with some basic info about our fiddler crabs at different sites\nTemperature vs Carapace Width\n\n\nmean_data = fids %>% \n  clean_names() %>%\n  group_by(matw) %>% \n  summarize(mean_carapace_width = mean(carapace_width))\n  \nggplot(mean_data, aes(x = matw, y = mean_carapace_width)) + \n  geom_point() + \n  labs(title = \"Mean Carapace Width by Temp\", \n       x = \"Mean Annual Water Temperature\", \n       y = \"Mean Carapace Width (mm)\", \n       caption = \"Figure B shows a negative trend in mean carapace width with increase in water temperature.\") +\n  theme_classic() +\n  geom_smooth(method = \"lm\")\n\n\n\n\nHere we can see the possible correlation between mean carapace width and temperature\nCitations\nJohnson, D. 2019. Fiddler crab body size in salt marshes from Florida to Massachusetts, USA at PIE and VCR LTER and NOAA NERR sites during summer 2016. ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/4c27d2e778d3325d3830a5142e3839bb (Accessed 2021-08-20).\nWickham et al., (2019). Welcome to the tidyverse. Journal of Open Source Software, 4(43), 1686, https://doi.org/10.21105/joss.01686\nKirill MÃ¼ller (2020). here: A Simpler Way to Find Your Files. R package version 1.0.1. https://CRAN.R-project.org/package=here\nGarrett Grolemund, Hadley Wickham (2011). Dates and Times Made Easy with lubridate. Journal of Statistical Software, 40(3), 1-25. URL https://www.jstatsoft.org/v40/i03/.\nSam Firke (2021). janitor: Simple Tools for Examining and Cleaning Dirty Data. R package version 2.1.0. https://CRAN.R-project.org/package=janitor\nHao Zhu (2021). kableExtra: Construct Complex Table with â€˜kableâ€™ and Pipe Syntax. R package version 1.3.4. https://CRAN.R-project.org/package=kableExtra\n```{.r .distill-force-highlighting-css}\n\n\n",
    "preview": "posts/2021-08-20-bringing-it-all-together/bringing-it-all-together_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-08-24T23:04:03+00:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-08-16-data-wrangling/",
    "title": "Data Wrangling",
    "description": "Here are some new functions I learned which help quickly tabulate large data sets.",
    "author": [
      {
        "name": "Jake Eisaguirre",
        "url": {}
      }
    ],
    "date": "2021-08-16",
    "categories": [],
    "contents": "\n-filter() <- used for rows\n-mutate() <- adds a new column\n-select() <- used for columns\n-summarize() <- creates a new data table\n-group_by() <- groups variables for calculations\n-case_when() <- can filter and select by conditional statements\n\n\n\n",
    "preview": "posts/2021-08-16-data-wrangling/download.jpeg",
    "last_modified": "2021-08-24T23:04:03+00:00",
    "input_file": {}
  }
]
